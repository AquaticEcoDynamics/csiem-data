What i thought was a bug in the zoop dataset when trying to run marvl was a werid bug where all the matfiles contained nans instead of real values, after a rerun it fixed itself. There was also a change to the marvl code where you choose which variables you want ran using an index in the marvl sheet in varkey and I hadnt updated all of the new variables, so they werent being updated. It all works now.